<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>UK Air Pollution and Emissions Data Explorer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Interactive charts using UK Government data">
  <meta property="og:type" content="website">
  <meta property="og:title" content="UK Air Pollution and Emissions Data Explorer">
  <meta property="og:description" content="Interactive charts using UK Government data">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="UK Air Pollution and Emissions Data Explorer">
  <meta name="twitter:description" content="Interactive charts using UK Government data">
  <link rel="stylesheet" href="dist/tailwind.css">
  <link rel="stylesheet" href="SharedResources/common-styles.css">
  <style>
    body {
      font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: #ffffff;
      color: #111827;
      margin: 0;
    }

    .resources-shell {
      padding: 20px 20px 20px 0;
      margin: 0;
      background: #ffffff;
    }

    .resources-frame {
      width: calc(100% - 280px);
      margin: 0 auto 0 140px;
      padding: 0 32px 32px 0;
      background: #ffffff;
      border-radius: 6px;
      box-sizing: border-box;
    }

    .resources-header {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
      margin-bottom: 2rem;
    }

    .resources-header .main-title {
      padding-right: 0;
      margin: 0;
    }

    .resources-header p {
      color: #475569;
      font-size: 1rem;
      max-width: 48ch;
      margin: 0;
    }

    .resources-table-section {
      background: #ffffff;
      margin-top: 1rem;
    }

    .resources-table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0 20px;
      font-size: 0.98rem;
      color: #0f172a;
    }

    .resources-table td {
      border: none;
      padding: 0;
      vertical-align: top;
    }

    .resource-logo-cell {
      width: 110px;
      padding-right: 24px;
      display: flex;
      justify-content: center;
    }

    .resource-logo {
      display: block;
      width: 100%;
      max-width: 95px;
      height: auto;
    }

    .resource-info-name {
      display: inline-block;
      margin: 0 0 6px 0;
      font-weight: 700;
      color: #ff8c1a;
      text-decoration: underline;
      font-size: 2rem;
      line-height: 1.25;
    }

    .resource-info-name:focus-visible {
      outline: 2px solid rgba(255, 140, 26, 0.45);
      outline-offset: 3px;
    }

    .resource-info-name:hover,
    .resource-info-name:focus-visible {
      color: #cc7500;
    }

    .resource-info-desc {
      margin: 0;
      color: #374151;
      line-height: 1.5;
    }

    .resource-logo--caw {
      max-width: 80px;
    }

    @media (max-width: 640px) {
      .resource-logo-cell {
        width: 80px;
        padding-right: 16px;
      }

      .resource-logo {
        max-width: 80px;
      }
    }

    @media (max-width: 1100px) {
      .resources-shell {
        padding: 20px;
      }

      .resources-frame {
        width: 100%;
        margin-left: 0;
        padding: 0 24px 32px 0;
      }
    }
  </style>
</head>
<body>
  <main class="resources-shell">
    <div class="resources-frame">
      <header class="resources-header">
        <h1 class="main-title">Resources</h1>
        <p>A selection of organisations campaigning for clean air, including groups that focus specifically on pollution from domestic wood burning.</p>
      </header>

      <section class="resources-table-section" aria-label="Organisations">
        <table class="resources-table" role="presentation">
          <tbody>
            <tr>
              <td class="resource-logo-cell">
                <a href="https://www.communitiesagainstwoodsmoke.com/" target="_blank" rel="noopener">
                  <img src="SharedResources/images/CAW-logo-alpha.svg" alt="Communities Against Woodsmoke logo" class="resource-logo resource-logo--caw">
                </a>
              </td>
              <td>
                <a class="resource-info-name" href="https://www.communitiesagainstwoodsmoke.com/" target="_blank" rel="noopener">Communities Against Woodsmoke</a>
                <p class="resource-info-desc">This is a grassroots organisation that supports people experiencing the health impacts from woodsmoke pollution in their communites and campaigns on a local and national level for legislation change around all types of solid fuel burning.</p>
              </td>
            </tr>
            <tr>
              <td class="resource-logo-cell">
                <a href="https://www.dsawsp.org/" target="_blank" rel="noopener">
                  <img src="SharedResources/images/DSAWSP-2018.svg" alt="Doctors and Scientists Against Wood Smoke Pollution logo" class="resource-logo">
                </a>
              </td>
              <td>
                <a class="resource-info-name" href="https://www.dsawsp.org/" target="_blank" rel="noopener">Doctors and Scientists Against Wood Smoke Pollution (DSAWSP)</a>
                <p class="resource-info-desc">Formed in 2016, DSAWSP is an international coalition of doctors, scientists and others who are dedicated to reducing harm to human health and our climate by decreasing wood burning. The Stories section contains testimonials from people around the world whose health has been affected by wood smoke pollution, often from neighbouring sources.</p>
              </td>
            </tr>
          </tbody>
        </table>
      </section>
    </div>
  </main>

  <script>
    (function() {
      function measureHeight() {
        const body = document.body;
        const docEl = document.documentElement;
        let height = Math.max(
          body ? body.scrollHeight : 0,
          body ? body.offsetHeight : 0,
          docEl ? docEl.scrollHeight : 0,
          docEl ? docEl.offsetHeight : 0,
          500
        );
        if (!Number.isFinite(height) || height <= 0) {
          height = 700;
        }
        return height;
      }

      function sendHeightToParent() {
        try {
          const height = measureHeight();
          window.parent.postMessage({
            type: 'contentHeight',
            chart: 'resources',
            height
          }, '*');
        } catch (error) {
          console.warn('Unable to send resources height to parent:', error);
        }
      }

      function scheduleHeightUpdate(delay = 40) {
        setTimeout(() => {
          requestAnimationFrame(sendHeightToParent);
        }, delay);
      }

      document.addEventListener('DOMContentLoaded', () => {
        const resourceImages = document.querySelectorAll('.resource-logo');
        resourceImages.forEach(img => {
          if (img.complete) {
            scheduleHeightUpdate(40);
          } else {
            img.addEventListener('load', () => scheduleHeightUpdate(40), { once: true });
            img.addEventListener('error', () => scheduleHeightUpdate(40), { once: true });
          }
        });
        scheduleHeightUpdate(30);
      });

      window.addEventListener('load', () => {
        scheduleHeightUpdate(60);
      });

      window.addEventListener('message', event => {
        if (event?.data?.type === 'requestHeight') {
          scheduleHeightUpdate(20);
        }
      });
    })();
  </script>
</body>
</html>
