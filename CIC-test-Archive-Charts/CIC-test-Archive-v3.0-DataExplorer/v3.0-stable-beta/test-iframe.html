<!DOCTYPE html>
<html>
<head>
    <title>Test Iframe</title>
</head>
<body>
    <h1>Test Iframe Content</h1>
    <script>
        console.log('ðŸ”¥ TEST IFRAME SCRIPT WORKING!');
        console.log('Document ready state:', document.readyState);
        console.log('Scripts in document:', document.querySelectorAll('script').length);
        
        // Send immediate message
        if (window.parent && window.parent !== window) {
            console.log('ðŸ“¤ Sending test message to parent...');
            window.parent.postMessage({ 
                type: 'test', 
                message: 'Test iframe script is working!' 
            }, '*');
        }
        
        // Send chartReady message after delay
        setTimeout(() => {
            console.log('ðŸ“¤ Sending chartReady message...');
            if (window.parent && window.parent !== window) {
                window.parent.postMessage({ 
                    type: 'chartReady', 
                    chart: 'line' 
                }, '*');
            }
        }, 1000);
    </script>
</body>
</html>