<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dependency Test</title>
</head>
<body>
    <h1>Testing Dependencies</h1>
    <div id="results"></div>

    <!-- Load dependencies in order -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>
    <script src="../../SharedResources/supabase-config.js"></script>
    <script src="../../SharedResources/analytics.js"></script>
    <script src="../../SharedResources/colors.js"></script>
    <script src="supabase.js"></script>

    <script>
        function testDependencies() {
            const results = document.getElementById('results');
            let output = '';

            // Test Supabase library
            output += `<p>Supabase library: ${window.supabase ? 'Available' : 'Missing'}</p>`;
            
            // Test SupabaseConfig
            output += `<p>SupabaseConfig: ${window.SupabaseConfig ? 'Available' : 'Missing'}</p>`;
            
            // Test Analytics
            output += `<p>Analytics: ${window.Analytics ? 'Available' : 'Missing'}</p>`;
            
            // Test Colors
            output += `<p>Colors: ${window.Colors ? 'Available' : 'Missing'}</p>`;
            
            // Test our supabase module
            output += `<p>Local supabase module: ${window.supabase && window.supabase.loadData ? 'Available' : 'Missing'}</p>`;

            try {
                // Test Supabase client initialization
                const client = window.SupabaseConfig.initSupabaseClient();
                output += `<p>Supabase client: ${client ? 'Successfully initialized' : 'Failed to initialize'}</p>`;
            } catch (error) {
                output += `<p>Supabase client error: ${error.message}</p>`;
            }

            try {
                // Test Analytics session ID
                const sessionId = window.Analytics.getSessionId();
                output += `<p>Session ID: ${sessionId ? 'Generated' : 'Failed'}</p>`;
            } catch (error) {
                output += `<p>Analytics error: ${error.message}</p>`;
            }

            results.innerHTML = output;
        }

        document.addEventListener('DOMContentLoaded', testDependencies);
    </script>
</body>
</html>